<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta name="description" content="这是随风前行github上的博客">
  <meta name="keyword" content="hexo-theme, vuejs">
  
    <link rel="shortcut icon" href="/css/images/logo.png">
  
  <title>
    
      vue项目webPack多页面配置 | cox-yj
    
  </title>
  <link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="//cdn.bootcss.com/nprogress/0.2.0/nprogress.min.css" rel="stylesheet">
  <link href="//cdn.bootcss.com/highlight.js/9.12.0/styles/tomorrow.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/plugins/gitment.css">
  <script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
  <script src="//cdn.bootcss.com/geopattern/1.2.3/js/geopattern.min.js"></script>
  <script src="//cdn.bootcss.com/nprogress/0.2.0/nprogress.min.js"></script>
  <script src="/js/qrious.js"></script>
<script src="/js/gitment.js"></script>
  
  
    <!-- MathJax support START -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- MathJax support END -->
  


</head>
<div class="wechat-share">
  <img src="/css/images/logo.png" />
</div>

  <body>
    <header class="header fixed-header">
  <div class="header-container">
    <a class="home-link" href="/">
      <div class="logo"></div>
      <span>cox-yj</span>
    </a>
    <ul class="right-list">
      
        <li class="list-item">
          
            <a href="/" class="item-link">Home</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/tags/" class="item-link">Tags</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/archives/" class="item-link">Archives</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/project/" class="item-link">Projects</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/about/" class="item-link">About</a>
          
        </li>
      
    </ul>
    <div class="menu">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </div>
    <div class="menu-mask">
      <ul class="menu-list">
        
          <li class="menu-item">
            
              <a href="/" class="menu-link">Home</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/tags/" class="menu-link">Tags</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/archives/" class="menu-link">Archives</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/project/" class="menu-link">Projects</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/about/" class="menu-link">About</a>
            
          </li>
        
      </ul>
    </div>
  </div>
</header>

    <div id="article-banner">
  <h2>vue项目webPack多页面配置</h2>
  <p class="post-date">2018-06-23</p>
  <div class="arrow-down">
    <a href="javascript:;"></a>
  </div>
</div>
<main class="app-body flex-box">
  <!-- Article START -->
  <article class="post-article">
    <section class="markdown-content"><!-- TITLE: Webpack -->
<!-- SUBTITLE: A quick summary of Webpack -->
<p>​</p>
<h1 id="什么是webpack"><a href="#什么是webpack" class="headerlink" title="什么是webpack"></a>什么是webpack</h1><p>WebPack可以看做是<strong>模块打包机</strong>：它做的事情是，分析你的项目结构，找到JavaScript模块以及其它的一些浏览器不能直接运行的拓展语言（Scss，TypeScript等），并将其转换和打包为合适的格式供浏览器使用。<br>​</p>
<h1 id="为什要使用WebPack"><a href="#为什要使用WebPack" class="headerlink" title="为什要使用WebPack"></a>为什要使用WebPack</h1><ul>
<li>现今的很多网页其实可以看做是功能丰富的应用，它们拥有着复杂的JavaScript代码和一大堆依赖包。</li>
<li>模块化，我们可以将各功能拆分成小模块来实现。</li>
<li>扩展语言，使我们能够实现目前版本的JavaScript不能直接使用的特性，并且之后还能转换为JavaScript文件使浏览器可以识别。<br>​<h1 id="开始使用webpack"><a href="#开始使用webpack" class="headerlink" title="开始使用webpack"></a>开始使用webpack</h1></li>
<li>安装nodejs</li>
<li>npm i -g webpack全局安装</li>
<li>npm init创建package.json文件（如果没有）</li>
<li>npm i -D webpack安装到项目目录</li>
<li>创建webpack.config.js配置文件</li>
<li>使用webpack命令行即可自动使用webpack.config.js配置打包</li>
<li>或者使用webpack –config [path]来指定配置文件<br>​<h1 id="配置文件详解"><a href="#配置文件详解" class="headerlink" title="配置文件详解"></a>配置文件详解</h1><h2 id="entry-String-Object"><a href="#entry-String-Object" class="headerlink" title="entry: String|Object"></a>entry: String|Object</h2>主文件入口<br>​<h2 id="output-Object"><a href="#output-Object" class="headerlink" title="output: Object"></a>output: Object</h2>输出配置对象有以下属性<h3 id="path-String"><a href="#path-String" class="headerlink" title="path: String"></a>path: String</h3>生成文件目录<h3 id="filename-String"><a href="#filename-String" class="headerlink" title="filename: String"></a>filename: String</h3>生成文件名称<h3 id="libraryTarget-String"><a href="#libraryTarget-String" class="headerlink" title="libraryTarget: String"></a>libraryTarget: String</h3>生成文件标准，如果只是简单的被html引用，不需要添加此属性。<br>如果是打包库需要被其他项目import， 改为umd为生成全兼容方案<h3 id="library-String"><a href="#library-String" class="headerlink" title="library: String"></a>library: String</h3>为require(‘xxx’)的名称<h2 id="devtool-String"><a href="#devtool-String" class="headerlink" title="devtool: String"></a>devtool: String</h2>添加此属性值source-map可以生成方便调试的sourcemap文件，生产环境去掉<br>​<h2 id="resolve-Object"><a href="#resolve-Object" class="headerlink" title="resolve: Object"></a>resolve: Object</h2>文件处理对象，有以下属性<h3 id="alias-Object"><a href="#alias-Object" class="headerlink" title="alias: Object"></a>alias: Object</h3>别名属性，可以为路径指定别名，如 components: ‘./src/components’<h3 id="extensions-Array-String"><a href="#extensions-Array-String" class="headerlink" title="extensions: Array[String]"></a>extensions: Array[String]</h3>尝试处理的文件名后缀，比如配置了[‘.js’, ‘.vue’]在import的时候只写common，  编译器会尝试寻找common.js和common.vue<h2 id="module-Object"><a href="#module-Object" class="headerlink" title="module: Object"></a>module: Object</h2></li>
<li>通过使用不同的loader，webpack有能力调用外部的脚本或工具，实现对不同格式的文件的处理，比如说分析转换scss为css，或者把下一代的JS文件（ES6，ES7)转换为现代浏览器兼容的JS文件。</li>
<li>loader需要单独安装，并在webpack配置文件中的<strong>module对象中的rules属性</strong>配置，一个loader配置包含以下属性<h3 id="test-Reg"><a href="#test-Reg" class="headerlink" title="test: Reg"></a>test: Reg</h3>用来匹配文件名的正则表达式<h3 id="use-String-Array-String-Object-Array-Object"><a href="#use-String-Array-String-Object-Array-Object" class="headerlink" title="use: String|Array[String]|Object|Array[Object]"></a>use: String|Array[String]|Object|Array[Object]</h3>使用的loader名称，或loader对象，或一组多个loader名称或对象<h3 id="include-Reg"><a href="#include-Reg" class="headerlink" title="include: Reg"></a>include: Reg</h3>手动添加必须处理的文件（可选）<h3 id="exclude-Reg"><a href="#exclude-Reg" class="headerlink" title="exclude: Reg"></a>exclude: Reg</h3>手动屏蔽不处理的文件（可选）<h2 id="plugins-Array"><a href="#plugins-Array" class="headerlink" title="plugins: Array"></a>plugins: Array</h2>loaders为在每个文件上执行的转换，而plugins为在整个打包过程里执行操作和自定义功能。有了插件，能在webpack中添加极其强大的定制化。<br>使用：在配置文件头里require()插件对象，将他添加到plugins数组里。使用option来配置插件，或者使用new来实例化插件对象。<br>​<h1 id="常用loaders配置"><a href="#常用loaders配置" class="headerlink" title="常用loaders配置"></a>常用loaders配置</h1><h2 id="css-loader"><a href="#css-loader" class="headerlink" title="css-loader"></a>css-loader</h2></li>
<li>npm i -D style-loader css-loader安装<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">  rules:[</span><br><span class="line">    &#123;</span><br><span class="line">      test: <span class="regexp">/.css$/</span>,</span><br><span class="line">      use: [<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line">​</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="vue-loader"><a href="#vue-loader" class="headerlink" title="vue-loader"></a>vue-loader</h2><ul>
<li>npm i –D vue-loader vue-style-loader vue-template-complier安装<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/.vue$/</span>,</span><br><span class="line">  use: <span class="string">'vue-loader'</span> </span><br><span class="line">&#125;</span><br><span class="line">​</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="babel-loader"><a href="#babel-loader" class="headerlink" title="babel-loader"></a>babel-loader</h2><ul>
<li>通过babel，可以将es6、es7等浏览器目前还不支持的新语法编译成浏览器可以执行的旧语法。</li>
<li>npm i –D babel-core babel-loader babel-preset-es2015 babel-preset-stage-0安装<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/.js$/</span>,</span><br><span class="line">  use: <span class="string">'babel-loader'</span>,</span><br><span class="line">  exclude: <span class="regexp">/node_modules/</span> <span class="comment">//不编译依赖包</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>项目目录下创建babel的配置文件：<br>新建文件 改名为 .babelrc. 即可创建.babelrc配置文件<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"presets"</span>: [<span class="string">"es2015"</span>, <span class="string">"stage-0"</span>]</span><br><span class="line">&#125;</span><br><span class="line">​</span><br></pre></td></tr></table></figure></p>
<h2 id="url-loader"><a href="#url-loader" class="headerlink" title="url-loader"></a>url-loader</h2><ul>
<li>url-loader可以将打包中的其他图片文件等输出到打包目录，并且可以设定文件大小小于设置值时转换成base64编码串来减少文件数量。</li>
<li>npm i –D url-loader安装<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.(png|jpg|gif|svg)$/</span>,</span><br><span class="line">  loader: <span class="string">'url-loader?limit=8192&amp;name=images/[hash:8].[name].[ext]'</span></span><br><span class="line">  <span class="comment">// 8192为设置的文件大小</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="常用plugins配置"><a href="#常用plugins配置" class="headerlink" title="常用plugins配置"></a>常用plugins配置</h1><h2 id="html-webpack-plugin"><a href="#html-webpack-plugin" class="headerlink" title="html-webpack-plugin"></a>html-webpack-plugin</h2><p>这个插件依据一个简单的html模版，自动生成一个新的模版，向里面添加了编译后的bundle文件，在每次生成的bundle文件名都不一样（比如添加了hash值）时非常有用</p>
<ul>
<li>使用npm i –D html-webpack-plugin安装</li>
<li>webpack.config.js中配置<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>)</span><br><span class="line">plugins: [</span><br><span class="line">  <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">    template: __dirname + <span class="string">'/index.html'</span><span class="comment">// 模版文件路径</span></span><br><span class="line">  &#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="HotModuleReplacementPlugin"><a href="#HotModuleReplacementPlugin" class="headerlink" title="HotModuleReplacementPlugin"></a>HotModuleReplacementPlugin</h2><p>这个插件可以在修改组件后自动重载页面，在生产环境勿使用<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>)</span><br><span class="line">plugins: [</span><br><span class="line">  <span class="keyword">new</span> webpack.HotModuleReplacementPlugin()</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<p>​</p>
<h1 id="多入口webpack"><a href="#多入口webpack" class="headerlink" title="多入口webpack"></a>多入口webpack</h1><p>除了SPA，也有多页面应用需要用到webpack打包。<br>简单思路如下，</p>
<ul>
<li>打包每个页面的index.js</li>
<li>单独打包公共库如vue，jquery</li>
<li>单独打包不常改动的公共组件<h2 id="配置entry"><a href="#配置entry" class="headerlink" title="配置entry"></a>配置entry</h2>entry除了上面的一个单路径之外，还可以接受一个对象，名字对应路径。<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">entry: &#123;</span><br><span class="line">  home: __dirname+<span class="string">'/src/apps/home/index.js'</span>,</span><br><span class="line">  map: __dirname+<span class="string">'/src/apps/map/index.js'</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>但是这样的话每增加一个页面都得手动去添加入口，下面我们借助glob来匹配入口文件</p>
<h3 id="使用glob"><a href="#使用glob" class="headerlink" title="使用glob"></a>使用glob</h3><p>npm i –D glob安装<br>配置文件里<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> glob = <span class="built_in">require</span>(‘glob’)</span><br><span class="line"><span class="keyword">const</span> files = glob.sync(__dirname + <span class="string">'/src/apps/*/index.js'</span>)<span class="comment">// 即可返回所有的匹配路径的入口文件</span></span><br><span class="line">files.forEach(<span class="function"><span class="params">filepath</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> path = filepath.replace(<span class="string">'/index.js'</span>, <span class="string">''</span>)</span><br><span class="line">  <span class="keyword">const</span> name = path.slice(path.lastIndexOf(<span class="string">'/'</span>) + <span class="number">1</span>)</span><br><span class="line">  entry[name] = filepath</span><br><span class="line">&#125;)</span><br><span class="line">​</span><br></pre></td></tr></table></figure></p>
<h2 id="打包三方库"><a href="#打包三方库" class="headerlink" title="打包三方库"></a>打包三方库</h2><p>在entry中添加一个入口对应数组即可<br>如<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">entry: &#123;</span><br><span class="line">  vendor: [<span class="string">'vue'</span>, <span class="string">'jquery'</span>]</span><br><span class="line">&#125;</span><br><span class="line">​</span><br></pre></td></tr></table></figure></p>
<p>这样就会生成一个vendor.js文件为打包的所有库<br>还需要在plugins里添加一个对象，使得代码中import这些库的地方不再打包库进去<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">plugins:[</span><br><span class="line">  <span class="keyword">new</span> webpack.optimize.CommonsChunksPlugin(<span class="string">'vendor'</span>)</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<h2 id="打包公共组件"><a href="#打包公共组件" class="headerlink" title="打包公共组件"></a>打包公共组件</h2><p>同样的，我们使用glob来匹配组件，将他们打包成一个文件<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> comps = glob.sync(__dirname + <span class="string">'/src/components/*/*.vue'</span>)</span><br><span class="line">​</span><br><span class="line">entry: &#123;</span><br><span class="line">  components: comps</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>加入之前那个插件对象中<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">  <span class="keyword">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class="line">    names: [<span class="string">'vendor'</span>, <span class="string">'components'</span>]</span><br><span class="line">  &#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<h2 id="生成功能的html页面"><a href="#生成功能的html页面" class="headerlink" title="生成功能的html页面"></a>生成功能的html页面</h2><p>在之前的files.forEach中加入<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">files.forEach(<span class="function"><span class="params">filepath</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> path = filepath.replace(<span class="string">'/index.js'</span>, <span class="string">''</span>)</span><br><span class="line">  <span class="keyword">const</span> name = path.slice(path.lastIndexOf(<span class="string">'/'</span>) + <span class="number">1</span>)</span><br><span class="line">  entry[name] = filepath</span><br><span class="line">​</span><br><span class="line">  <span class="keyword">const</span> plug = <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">    filename: __dirname + <span class="string">'/dist/'</span> + name + <span class="string">'.html'</span>,</span><br><span class="line">    template: __dirname + <span class="string">'/src/apps/index.html'</span>,</span><br><span class="line">    chunks: [name, <span class="string">'vendor'</span>, <span class="string">'components'</span>],</span><br><span class="line">    inject: <span class="literal">true</span></span><br><span class="line">  &#125;)</span><br><span class="line">  config.plugins.push(plug)</span><br><span class="line">&#125;)</span><br><span class="line">​</span><br></pre></td></tr></table></figure></p>
<h2 id="生成每个页面对应的目录"><a href="#生成每个页面对应的目录" class="headerlink" title="生成每个页面对应的目录"></a>生成每个页面对应的目录</h2><p>如之前的配置，entry中的name的值如果包含路径，就可以实现。<br>如原map，改为map/index，则会生成map文件夹<br>配置中改为const name = path.slice(path.lastIndexOf(‘/‘) + 1) + ‘/index‘<br>​</p>
<h2 id="多入口打包示例配置"><a href="#多入口打包示例配置" class="headerlink" title="多入口打包示例配置"></a>多入口打包示例配置</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> glob = <span class="built_in">require</span>(<span class="string">'glob'</span>)</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>)</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>)</span><br><span class="line">​</span><br><span class="line"><span class="keyword">const</span> files = glob.sync(__dirname + <span class="string">'/src/apps/*/index.js'</span>)</span><br><span class="line"><span class="keyword">const</span> comps = glob.sync(__dirname + <span class="string">'/src/components/*/*.vue'</span>)</span><br><span class="line">​</span><br><span class="line"><span class="keyword">const</span> entry = &#123;</span><br><span class="line">  vendor: [<span class="string">'vue'</span>, <span class="string">'jquery'</span>]，</span><br><span class="line">  components: comps</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">  entry,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: __dirname + <span class="string">'/dist'</span>,</span><br><span class="line">    filename: <span class="string">'[name].js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> webpack.optimize.CommonsChunkPlugin(&#123; <span class="attr">names</span>: [<span class="string">'vendor'</span>, <span class="string">'components'</span>] &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">files.forEach(<span class="function"><span class="params">filepath</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> path = filepath.replace(<span class="string">'/index.js'</span>, <span class="string">''</span>)</span><br><span class="line">  <span class="keyword">const</span> name = path.slice(path.lastIndexOf(<span class="string">'/'</span>) + <span class="number">1</span>) + <span class="string">'/index'</span></span><br><span class="line">  entry[name] = filepath</span><br><span class="line">​</span><br><span class="line">  <span class="keyword">const</span> plug = <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">    filename: __dirname + <span class="string">'/dist/'</span> + name + <span class="string">'.html'</span>,</span><br><span class="line">    template: __dirname + <span class="string">'/src/apps/index.html'</span>,</span><br><span class="line">    chunks: [name, <span class="string">'vendor'</span>, <span class="string">'components'</span>],</span><br><span class="line">    inject: <span class="literal">true</span></span><br><span class="line">  &#125;)</span><br><span class="line">  config.plugins.push(plug)</span><br><span class="line">&#125;)</span><br><span class="line">​</span><br><span class="line"><span class="built_in">module</span>.exports = config</span><br><span class="line">​</span><br></pre></td></tr></table></figure>
<p>Powered by Wiki.js.<br>首页<br>滚到顶部</p>
</section>
    <!-- Tags START -->
    
      <div class="tags">
        <span>Tags:</span>
        
  <a href="/tags#vue" >
    <span class="tag-code">vue</span>
  </a>

      </div>
    
    <!-- Tags END -->
    <!-- NAV START -->
    
  <div class="nav-container">
    <!-- reverse left and right to put prev and next in a more logic postition -->
    
      <a class="nav-left" href="/2018/06/23/好玩的js/">
        <span class="nav-arrow">← </span>
        
          好玩的js
        
      </a>
    
    
      <a class="nav-right" href="/2018/06/23/vue使用中的疑难杂症/">
        
          vue使用中的疑难杂症
        
        <span class="nav-arrow"> →</span>
      </a>
    
  </div>

    <!-- NAV END -->
    <!-- 打赏 START -->
    
      <div class="money-like">
        <div class="reward-btn">
          赏
          <span class="money-code">
            <span class="alipay-code">
              <div class="code-image"></div>
              <b>使用支付宝打赏</b>
            </span>
            <span class="wechat-code">
              <div class="code-image"></div>
              <b>使用微信打赏</b>
            </span>
          </span>
        </div>
        <p class="notice">若你觉得我的文章对你有帮助，欢迎点击上方按钮对我打赏</p>
      </div>
    
    <!-- 打赏 END -->
    <!-- 二维码 START -->
    
      <div class="qrcode">
        <canvas id="share-qrcode"></canvas>
        <p class="notice">扫描二维码，分享此文章</p>
      </div>
    
    <!-- 二维码 END -->
    
      <!-- Gitment START -->
      <div id="comments"></div>
      <!-- Gitment END -->
    
  </article>
  <!-- Article END -->
  <!-- Catalog START -->
  
    <aside class="catalog-container">
  <div class="toc-main">
    <strong class="toc-title">Catalog</strong>
    
      <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#什么是webpack"><span class="toc-nav-text">什么是webpack</span></a></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#为什要使用WebPack"><span class="toc-nav-text">为什要使用WebPack</span></a></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#开始使用webpack"><span class="toc-nav-text">开始使用webpack</span></a></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#配置文件详解"><span class="toc-nav-text">配置文件详解</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#entry-String-Object"><span class="toc-nav-text">entry: String|Object</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#output-Object"><span class="toc-nav-text">output: Object</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#path-String"><span class="toc-nav-text">path: String</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#filename-String"><span class="toc-nav-text">filename: String</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#libraryTarget-String"><span class="toc-nav-text">libraryTarget: String</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#library-String"><span class="toc-nav-text">library: String</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#devtool-String"><span class="toc-nav-text">devtool: String</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#resolve-Object"><span class="toc-nav-text">resolve: Object</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#alias-Object"><span class="toc-nav-text">alias: Object</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#extensions-Array-String"><span class="toc-nav-text">extensions: Array[String]</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#module-Object"><span class="toc-nav-text">module: Object</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#test-Reg"><span class="toc-nav-text">test: Reg</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#use-String-Array-String-Object-Array-Object"><span class="toc-nav-text">use: String|Array[String]|Object|Array[Object]</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#include-Reg"><span class="toc-nav-text">include: Reg</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#exclude-Reg"><span class="toc-nav-text">exclude: Reg</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#plugins-Array"><span class="toc-nav-text">plugins: Array</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#常用loaders配置"><span class="toc-nav-text">常用loaders配置</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#css-loader"><span class="toc-nav-text">css-loader</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#vue-loader"><span class="toc-nav-text">vue-loader</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#babel-loader"><span class="toc-nav-text">babel-loader</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#url-loader"><span class="toc-nav-text">url-loader</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#常用plugins配置"><span class="toc-nav-text">常用plugins配置</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#html-webpack-plugin"><span class="toc-nav-text">html-webpack-plugin</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#HotModuleReplacementPlugin"><span class="toc-nav-text">HotModuleReplacementPlugin</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#多入口webpack"><span class="toc-nav-text">多入口webpack</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#配置entry"><span class="toc-nav-text">配置entry</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#使用glob"><span class="toc-nav-text">使用glob</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#打包三方库"><span class="toc-nav-text">打包三方库</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#打包公共组件"><span class="toc-nav-text">打包公共组件</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#生成功能的html页面"><span class="toc-nav-text">生成功能的html页面</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#生成每个页面对应的目录"><span class="toc-nav-text">生成每个页面对应的目录</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#多入口打包示例配置"><span class="toc-nav-text">多入口打包示例配置</span></a></li></ol></li></ol>
    
  </div>
</aside>
  
  <!-- Catalog END -->
</main>

<script>
  (function () {
    var url = 'http://www.cox-yj.xin/2018/06/23/vue项目webPack多页面配置/';
    var banner = ''
    if (banner !== '' && banner !== 'undefined' && banner !== 'null') {
      $('#article-banner').css({
        'background-image': 'url(' + banner + ')'
      })
    } else {
      $('#article-banner').geopattern(url)
    }
    $('.header').removeClass('fixed-header')

     // error image
    $(".markdown-content img").on('error', function() {
      $(this).attr('src', 'http://file.muyutech.com/error-img.png')
      $(this).css({
        'cursor': 'default'
      })
    })

    // zoom image
    $(".markdown-content img").on('click', function() {
      var src = $(this).attr('src')
      if (src !== 'http://file.muyutech.com/error-img.png') {
        var imageW = $(this).width()
        var imageH = $(this).height()
        
        var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
        zoom = zoom < 1 ? 1 : zoom
        zoom = zoom > 2 ? 2 : zoom
        var transY = (($(window).height() - imageH) / 2).toFixed(2)

        $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="'+ src +'" /></div></div>')
        $('.image-view-wrap').addClass('wrap-active')
        $('.image-view-wrap img').css({
          'width': `${imageW}`,
          'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
        })
        $('html').css('overflow', 'hidden')

        $('.image-view-wrap').on('click', function() {
          $(this).remove()
          $('html').attr('style', '')
        })
      }
    })

    // qrcode
    var qr = new QRious({
      element: document.getElementById('share-qrcode'),
      value: document.location.href
    });

    // gitment
    var gitmentConfig = "cox-yj";
    if (gitmentConfig !== 'undefined') {
      var gitment = new Gitment({
        id: "vue项目webPack多页面配置",
        owner: "cox-yj",
        repo: "cox-yj.xin",
        oauth: {
          client_id: "fd3bb166ab6677fd330f",
          client_secret: "136c24f12fc71cc22096fe74b6ccb6164f532250"
        },
        theme: {
          render(state, instance) {
            const container = document.createElement('div')
            container.lang = "en-US"
            container.className = 'gitment-container gitment-root-container'
            container.appendChild(instance.renderHeader(state, instance))
            container.appendChild(instance.renderEditor(state, instance))
            container.appendChild(instance.renderComments(state, instance))
            container.appendChild(instance.renderFooter(state, instance))
            return container;
          }
        }
      })
      gitment.render(document.getElementById('comments'))
    }
  })();
</script>

    <div class="scroll-top">
  <span class="arrow-icon"></span>
</div>
    <footer class="app-footer">
  <p class="copyright">
    &copy; 2018 | Proudly powered by <a href="https://hexo.io" target="_blank">Hexo</a>
    <br>
    Theme by <a href="https://github.com/yanm1ng">yanm1ng</a>
  </p>
</footer>

<script>
  function async(u, c) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }
</script>
<script>
  async("//cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
    FastClick.attach(document.body);
  })
</script>

<script>
  var hasLine = 'true';
  async("//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js", function(){
    $('figure pre').each(function(i, block) {
      var figure = $(this).parents('figure');
      if (hasLine === 'false') {
        figure.find('.gutter').hide();
      }
      var lang = figure.attr('class').split(' ')[1] || 'code';
      var codeHtml = $(this).html();
      var codeTag = document.createElement('code');
      codeTag.className = lang;
      codeTag.innerHTML = codeHtml;
      $(this).attr('class', '').empty().html(codeTag);
      figure.attr('data-lang', lang.toUpperCase());
      hljs.highlightBlock(block);
    });
  })
</script>
<!-- Baidu Tongji -->

<script src="/js/script.js"></script>
  </body>
</html>